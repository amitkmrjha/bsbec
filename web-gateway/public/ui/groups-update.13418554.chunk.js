(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1959:function(e,r,t){"use strict";t.r(r);var n,a=t(14),o=t.n(a),i=t(490),u=t(131),c=t(10),s=t.n(c),l=t(53),f=t.n(l),p=t(1),m=t(493),d=t(712),b=t(40),y=t(498),v=t(486),h=t(485);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,r,t,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(r||0===i||(r={children:void 0}),r&&o)for(var u in o)void 0===r[u]&&(r[u]=o[u]);else r||(r=o||{});if(1===i)r.children=a;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];r.children=c}return{$$typeof:n,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}function x(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function S(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function i(e,r){try{var t=o[e](r),i=t.value}catch(e){return void a(e)}t.done?n(i):Promise.resolve(i).then(u,c)}function u(e){i("next",e)}function c(e){i("throw",e)}u()})}}function j(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,r){return!r||"object"!==g(r)&&"function"!=typeof r?P(e):r}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){function r(){var e,t,n;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return k(n,(t=n=k(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),Object.defineProperty(P(n),"state",{configurable:!0,enumerable:!0,writable:!0,value:{formData:{groupName:""},selectedUsers:[],users:[],selectedGroups:[],groups:[],error:{groupName:""},loading:!1}}),Object.defineProperty(P(n),"getGroups",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=O(regeneratorRuntime.mark(function e(){var r,t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.context.fetch,e.prev=1,e.next=4,r("".concat(p.b.groups));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,o=a.resources,n.setState({groups:o},function(){n.getUsers()}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}()}),Object.defineProperty(P(n),"getUsers",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=O(regeneratorRuntime.mark(function e(){var r,t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.context.fetch,e.prev=1,e.next=4,r("".concat(p.b.users));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,o=a.resources,n.setState({users:o},function(){n.getGroup()}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}()}),Object.defineProperty(P(n),"createData",{configurable:!0,enumerable:!0,writable:!0,value:function(e,r,t){return f.a.compact(f.a.map(e.members,function(e){var n=f.a.find(r,{keys:{key:e.key}});if(n)return n[t]}))}}),Object.defineProperty(P(n),"getGroup",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=O(regeneratorRuntime.mark(function e(){var r,t,a,o,i,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.context.fetch,t=n.state,a=t.formData,o=t.users,i=t.groups,e.prev=2,e.next=5,r("".concat(p.b.groups,"/").concat(n.props.params.id));case 5:return u=e.sent,e.next=8,u.json();case 8:c=e.sent,c=f.a.assign(a,c.resources),n.setState({formData:c,selectedUsers:n.createData(c,o,"name"),selectedGroups:n.createData(c,i,"groupName")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()}),Object.defineProperty(P(n),"isValid",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=n.state,r=e.formData,t=e.error,a=r.groupName;return f.a.some([a],m.a.isInputEmpty)&&f.a.each(p.m,function(e){t[e]=m.a.isInputEmpty(r[e])?p.r.mandatoryFields:""}),n.setState({error:t}),f.a.every(t,m.a.isInputEmpty)}}),Object.defineProperty(P(n),"createRequestBody",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=n.state,r=e.selectedUsers,t=e.formData,a=e.users,o=e.groups,i=e.selectedGroups;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){x(e,r,t[r])})}return e}({},t,{members:S(f.a.map(r,function(e){var r=f.a.find(a,{name:e});if(r)return{type:"UserReference",key:r.keys.key}})).concat(S(f.a.map(i,function(e){var r=f.a.find(o,{groupName:e});if(r)return{type:"GroupReference",key:r.keys.key}})))})}}),Object.defineProperty(P(n),"handleSubmit",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=O(regeneratorRuntime.mark(function e(r){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.context.fetch,r.preventDefault(),e.next=4,n.isValid();case 4:if(e.sent){e.next=9;break}return e.next=8,n.props.openNotifier({openNotify:!0,message:p.r.emptyField,variant:"warning"});case 8:return e.abrupt("return");case 9:return e.next=11,n.setState({loading:!0});case 11:return e.prev=11,e.next=14,t("".concat(p.b.groups,"/").concat(n.props.params.id),{method:"PUT",body:JSON.stringify(n.createRequestBody()),headers:{"Content-Type":"application/json"}});case 14:return a=e.sent,e.next=17,a.json();case 17:if(o=e.sent,201!==a.status){e.next=24;break}return e.next=21,n.props.openNotifier({openNotify:!0,message:p.r.group.update.success,variant:"success"});case 21:b.a.push("/user-management"),e.next=27;break;case 24:if(400!==a.status){e.next=27;break}return e.next=27,n.props.openNotifier({openNotify:!0,message:o.resources,variant:"error"});case 27:return e.next=29,n.setState({loading:!1});case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(11),console.error(e.t0);case 34:case"end":return e.stop()}},e,this,[[11,31]])}));return function(r){return e.apply(this,arguments)}}()}),Object.defineProperty(P(n),"handleChangeText",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var r=n.state,t=r.formData,a=r.error,o=e&&e.target,i=o.id,u=o.value;t[i]=u,a[i]=m.a.isInputEmpty(t[i])?p.r.mandatoryFields:"",n.setState({formData:t,error:a})}}),Object.defineProperty(P(n),"handleChangeSelectUsers",{configurable:!0,enumerable:!0,writable:!0,value:function(e){n.setState({selectedUsers:e.target.value})}}),Object.defineProperty(P(n),"handleChangeSelectGroups",{configurable:!0,enumerable:!0,writable:!0,value:function(e){n.setState({selectedGroups:e.target.value})}}),Object.defineProperty(P(n),"onCancel",{configurable:!0,enumerable:!0,writable:!0,value:function(){b.a.push("/user-management")}}),t))}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,o.a.Component),function(e,r,t){r&&j(e.prototype,r),t&&j(e,t)}(r,[{key:"componentDidMount",value:function(){this.getGroups()}},{key:"render",value:function(){var e=this.state,r=e.formData,t=e.error,n=e.users,a=e.selectedUsers,o=e.groups,i=e.selectedGroups,u=e.loading;return w(y.a,{breadCrumb:p.c.GROUP_UPDATE},void 0,w(d.a,{formData:r,users:n,selectedUsers:a,groups:o,selectedGroups:i,error:t,handleChangeText:this.handleChangeText,handleSubmit:this.handleSubmit,handleChangeSelectUsers:this.handleChangeSelectUsers,handleChangeSelectGroups:this.handleChangeSelectGroups,type:"Update Group",onCancel:this.onCancel,createUser:!0,loading:u}))}}]),r}();Object.defineProperty(C,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{openNotifier:function(){}}}),Object.defineProperty(C,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{fetch:s.a.func.isRequired}});var N,U=Object(u.b)(null,{openNotifier:v.c})(Object(h.a)(C));function G(e,r,t,n){N||(N="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(r||0===o||(r={children:void 0}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===o)r.children=n;else if(o>1){for(var u=new Array(o),c=0;c<o;c++)u[c]=arguments[c+3];r.children=u}return{$$typeof:N,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}var D="Update Group";function E(){return(E=function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function i(e,r){try{var t=o[e](r),i=t.value}catch(e){return void a(e)}t.done?n(i):Promise.resolve(i).then(u,c)}function u(e){i("next",e)}function c(e){i("throw",e)}u()})}}(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.params,e.abrupt("return",{chunks:["groups-update"],title:D,component:G(i.a,{},void 0,G(U,{title:D,params:t}))});case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}r.default=function(e){return E.apply(this,arguments)}},493:function(e,r,t){"use strict";var n=t(53),a=t.n(n);r.a={isInputEmpty:function(e){return a.a.isString(e)?!a.a.trim(e):a.a.isEmpty(e)},trimObject:function(e){return a.a.each(e,function(r,t){return e[t]=a.a.trim(r)})}}},498:function(e,r,t){"use strict";var n,a=t(14),o=t.n(a),i=(t(10),t(53)),u=t(481),c=t(489);function s(e,r,t,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(r||0===i||(r={children:void 0}),r&&o)for(var u in o)void 0===r[u]&&(r[u]=o[u]);else r||(r=o||{});if(1===i)r.children=a;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];r.children=c}return{$$typeof:n,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}var l,f=function(e){return s(u.c,{"aria-label":"Breadcrumb"},void 0,Object(i.map)(e.breadCrumb,function(e){return e.route?s(c.a,{style:{textDecoration:"none"},to:e.route},e.label,e.label):s(u.qb,{color:"textPrimary"},e.label,e.label)}))};function p(e,r,t,n){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(r||0===o||(r={children:void 0}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===o)r.children=n;else if(o>1){for(var u=new Array(o),c=0;c<o;c++)u[c]=arguments[c+3];r.children=u}return{$$typeof:l,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}var m=function(e){var r=e.children,t=e.breadCrumb,n=e.classes,a=e.style;return o.a.createElement(o.a.Fragment,null,p(f,{breadCrumb:t}),p(u.T,{className:n.paper,style:!Object(i.isUndefined)(a)&&a},void 0,r))};m.defaultProps={style:{},breadCrumb:[],children:[]};r.a=Object(u.ub)(function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px"),margin:"".concat(5*e.spacing.unit,"px auto 0"),width:"40%"}}})(m)},712:function(e,r,t){"use strict";var n,a=t(14),o=t.n(a),i=(t(10),t(132)),u=t.n(i),c=(t(53),t(481)),s=t(1);function l(e,r,t,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(r||0===i||(r={children:void 0}),r&&o)for(var u in o)void 0===r[u]&&(r[u]=o[u]);else r||(r=o||{});if(1===i)r.children=a;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];r.children=c}return{$$typeof:n,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p={PaperProps:{style:{maxHeight:224,width:250}}};r.a=Object(c.ub)(function(e){return{form:{width:"100%",margin:"".concat(e.spacing.unit,"px auto 0")},submit:{backgroundColor:s.e.NAVY_BLUE,marginRight:e.spacing.unit,textTransform:"capitalize"},formControl:{margin:"0 ".concat(5*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px 0"),maxWidth:530,width:"100%"},textField:{marginBottom:20},chip:{margin:e.spacing.unit/4,backgroundColor:s.e.NAVY_BLUE,color:s.e.WHITE},btnWrapper:{margin:"".concat(3*e.spacing.unit,"px auto"),width:"40%"},progress:{margin:0,color:"white"}}})(function(e){var r=null,t=e.classes,n=e.formData,i=e.error,s=e.handleChangeText,m=e.handleSubmit,d=e.handleChangeSelectUsers,b=e.handleChangeSelectGroups,y=e.type,v=e.users,h=e.selectedUsers,g=e.selectedGroups,w=e.groups,x=e.onCancel,S=e.loading,O=n.groupName,j=f(Object(a.useState)(0),2),k=j[0],P=j[1];return Object(a.useEffect)(function(){return P(function(e){return u.a.findDOMNode(r).offsetWidth})},[]),l("form",{className:t.form},void 0,l(c.nb,{id:"groupName",label:"Group Name",className:t.textField,value:O,onChange:s,margin:"normal",variant:"outlined",style:{borderColor:i.groupName?"red":""},fullWidth:!0,required:!0}),l(c.y,{variant:"outlined",className:t.formControl},void 0,o.a.createElement(c.I,{ref:function(e){r=e},htmlFor:"outlined-age-native-simple"},"Users"),l(c.ab,{multiple:!0,value:h,onChange:d,input:l(c.S,{name:"Users",labelWidth:k,id:"outlined-age-simple"}),renderValue:function(e){return l("div",{className:t.chips},void 0,e.map(function(e){return l(c.h,{label:e,className:t.chip},e)}))},MenuProps:p},void 0,v.map(function(e){return l(c.R,{value:e.name},e.keys.key,l(c.M,{primary:e.name}))}))),l(c.y,{variant:"outlined",className:t.formControl},void 0,o.a.createElement(c.I,{ref:function(e){r=e},htmlFor:"outlined-age-native-simple"},"Groups"),l(c.ab,{multiple:!0,value:g,onChange:b,input:l(c.S,{name:"Groups",labelWidth:k,id:"outlined-age-simple"}),renderValue:function(e){return l("div",{className:t.chips},void 0,e.map(function(e){return l(c.h,{label:e,className:t.chip},e)}))},MenuProps:p},void 0,w.map(function(e){return l(c.R,{value:e.groupName},e.keys.key,l(c.M,{primary:e.groupName}))}))),l("div",{className:t.btnWrapper},void 0,l(c.d,{type:"submit",variant:"contained",color:"primary",className:t.submit,onClick:m},void 0,S?l(c.i,{size:22,className:t.progress}):y),l(c.d,{type:"submit",variant:"contained",color:"primary",className:t.submit,onClick:x},void 0,"Cancel")))})}}]);
//# sourceMappingURL=groups-update.13418554.chunk.js.map