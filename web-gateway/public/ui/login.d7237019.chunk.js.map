{"version":3,"sources":["w:/projects/icax/Syndeia-Cloud/web-gateway/ui/src/components/LandingContent/LandingContent.js","w:/projects/icax/Syndeia-Cloud/web-gateway/ui/src/components/LoginForm/LoginForm.js","w:/projects/icax/Syndeia-Cloud/web-gateway/ui/src/routes/login/Login.js","w:/projects/icax/Syndeia-Cloud/web-gateway/ui/src/routes/login/index.js","w:/projects/icax/Syndeia-Cloud/web-gateway/ui/src/lib/formHelper.js"],"names":["components_LandingContent_LandingContent","Object","withUser","react_default","a","createElement","Fragment","_jsx","materialLib","htmlFor","LoginForm_NormalLoginForm","formData","username","password","error","loading","_this$state","_this","state","lodash_default","some","formHelper","isInputEmpty","each","constants","item","mandatoryFields","setState","every","_callee","e","fetch","response","user","roleDetails","userInfo","regeneratorRuntime","wrap","_context","prev","next","context","preventDefault","isValid","sent","props","openNotifier","openNotify","message","emptyField","variant","abrupt","rememberMe","signIn","method","body","JSON","stringify","headers","Content-Type","status","json","login","_objectSpread","token","resources","userId","keys","key","role","chain","roles","map","value","src_history","push","loginSuccess","loginFailed","t0","stop","this","_this$state2","_ref2","target","id","Component","_state","classes","className","main","avatar","src","Syndeia_logo_default","_ref3","style","color","textAlign","component","_ref4","paper","form","margin","required","fullWidth","_ref5","name","autoComplete","autoFocus","onChange","handleChange","_ref6","type","submit","onClick","handleSubmit","size","progress","prop_types_default","func","isRequired","Login_jsx","es","actions_user","notifier","setUserInfo","withNotifier","theme","width","display","marginLeft","spacing","unit","marginRight","marginTop","breakpoints","up","flexDirection","alignItems","padding","concat","backgroundColor","textTransform","login_Login","Login_ref","title","login_jsx","Layout","showSidebar","__webpack_exports__","chunks","login_ref","lodash__WEBPACK_IMPORTED_MODULE_0___default","isString","trim","isEmpty","trimObject","object"],"mappings":"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","file":"login.d7237019.chunk.js","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport React from 'react';\nimport withUser from '../../actions/withUser';\n\nconst LandingContent = () => <></>;\n\nexport default withUser(LandingContent);\n","/* eslint-disable import/no-extraneous-dependencies */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport {\n  Avatar,\n  Button,\n  CssBaseline,\n  FormControl,\n  Input,\n  InputLabel,\n  LockOutlinedIcon,\n  Paper,\n  Typography,\n  withStyles,\n  CircularProgress,\n} from '../../materialLib';\nimport history from '../../history';\nimport { LOGIN_FIELDS, API_URLS, MESSAGES } from '../../constants';\nimport { login, setUserInfo } from '../../actions/user';\nimport { openNotifier } from '../../actions/notifier';\nimport withNotifier from '../../actions/withNotifier';\nimport formHelper from '../../lib/formHelper';\nimport logoUrl from '../Header/Syndeia-logo.png';\n\nconst styles = theme => ({\n  main: {\n    width: 'auto',\n    display: 'block', // Fix IE 11 issue.\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 10,\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing.unit * 5,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme\n      .spacing.unit * 3}px`,\n  },\n  avatar: {\n    margin: `${theme.spacing.unit * 3}px auto`,\n    backgroundColor: '#1b144e',\n    textAlign: 'center',\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing.unit,\n  },\n  submit: {\n    marginTop: theme.spacing.unit * 3,\n    backgroundColor: '#1b144e',\n    textTransform: 'capitalize',\n  },\n  progress: {\n    margin: 0,\n    color: 'white',\n  },\n});\n\nclass NormalLoginForm extends React.Component {\n  static propTypes = {\n    login: PropTypes.func.isRequired,\n    classes: PropTypes.object.isRequired,\n    openNotifier: PropTypes.func,\n  };\n\n  static contextTypes = {\n    fetch: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    openNotifier: () => { },\n  };\n\n  state = {\n    formData: {\n      username: '',\n      password: '',\n    },\n    error: {\n      username: '',\n      password: '',\n    },\n    loading: false,\n  };\n\n  isValid = () => {\n    const { formData, error } = this.state;\n    const { username, password } = formData;\n    if (_.some([username, password], formHelper.isInputEmpty)) {\n      _.each(LOGIN_FIELDS, item => {\n        error[item] = formHelper.isInputEmpty(formData[item])\n          ? MESSAGES.mandatoryFields\n          : '';\n      });\n    }\n\n    this.setState({ error });\n\n    return _.every(error, formHelper.isInputEmpty);\n  };\n\n  handleSubmit = async e => {\n    const { fetch } = this.context;\n    let { formData } = this.state;\n    e.preventDefault();\n\n    const isValid = await this.isValid();\n\n    if (!isValid) {\n      await this.props.openNotifier({\n        openNotify: true,\n        message: MESSAGES.emptyField,\n        variant: 'warning',\n      });\n      return;\n    }\n    await this.setState({\n      loading: true,\n    });\n    try {\n      formData = { ...formData, rememberMe: false };\n      const response = await fetch(`${API_URLS.signIn}`, {\n        method: 'POST',\n        body: JSON.stringify(formData),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      if (response.status === 200) {\n        const user = await response.json();\n        this.props.login({\n          ...formData,\n          token: user.resources.token,\n        });\n\n        // API Call get roles'\n        const roleDetails = await fetch(`${API_URLS.userInfo}`);\n        const userInfo = await roleDetails.json();\n        this.props.login({\n          ...formData,\n          userId: userInfo.resources.keys.key,\n          token: user.resources.token,\n          role: _.chain(userInfo.resources.roles)\n            .map(item => item.role)\n            .value(),\n        });\n\n        history.push('/home');\n        await this.props.openNotifier({\n          openNotify: true,\n          message: MESSAGES.loginSuccess,\n          variant: 'success',\n        });\n      } else {\n        await this.props.openNotifier({\n          openNotify: true,\n          message: MESSAGES.loginFailed,\n          variant: 'error',\n        });\n      }\n      await this.setState({\n        loading: false,\n      });\n    } catch (er) {\n      await this.props.openNotifier({\n        openNotify: true,\n        message: MESSAGES.loginFailed,\n        variant: 'error',\n      });\n      await this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  handleChange = e => {\n    const { formData, error } = this.state;\n    const { id, value } = e && e.target;\n    formData[id] = value;\n    error[id] = formHelper.isInputEmpty(formData[id])\n      ? MESSAGES.mandatoryFields\n      : '';\n    this.setState({ formData, error });\n  };\n\n  render() {\n    const { formData, loading } = this.state;\n    const { username, password } = formData;\n    const { classes } = this.props;\n    return (\n      <main className={classes.main}>\n        <Avatar className={classes.avatar} src={logoUrl}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography\n          style={{ color: '#fff', textAlign: 'center' }}\n          component=\"h1\"\n          variant=\"h5\"\n        >\n          Syndeia\n        </Typography>\n        <CssBaseline />\n        <Paper className={classes.paper}>\n          <form className={classes.form}>\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"username\">Username</InputLabel>\n              <Input\n                id=\"username\"\n                name=\"username\"\n                autoComplete=\"username\"\n                autoFocus\n                value={username}\n                onChange={this.handleChange}\n              />\n            </FormControl>\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"password\">Password</InputLabel>\n              <Input\n                name=\"password\"\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n                value={password}\n                onChange={this.handleChange}\n              />\n            </FormControl>\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={this.handleSubmit}\n            >\n              {loading ? (\n                <CircularProgress size={22} className={classes.progress} />\n              ) : (\n                  'Sign in'\n                )}\n            </Button>\n          </form>\n        </Paper>\n      </main>\n    );\n  }\n}\n\nexport default connect(null, { login, openNotifier, setUserInfo })(\n  withNotifier(withStyles(styles)(NormalLoginForm)),\n);\n","import React from 'react';\nimport LoginForm from '../../components/LoginForm';\n\nfunction Login() {\n  return <LoginForm />;\n}\n\nexport default Login;\n","import React from 'react';\nimport Layout from 'components/Layout';\nimport LandingContent from 'components/LandingContent';\nimport Login from './Login';\n\nconst title = 'Log In';\n\nfunction action() {\n  return {\n    chunks: ['login'],\n    title,\n    component: (\n      <Layout showSidebar={false}>\n        <Login title={title} />\n        <LandingContent />\n      </Layout>\n    ),\n  };\n}\n\nexport default action;\n","import _ from 'lodash';\n\nexport default {\n  isInputEmpty: value =>\n    _.isString(value) ? !_.trim(value) : _.isEmpty(value),\n  trimObject: object =>\n    // eslint-disable-next-line no-param-reassign,no-return-assign\n    _.each(object, (value, key) => (object[key] = _.trim(value))),\n};\n"],"sourceRoot":""}