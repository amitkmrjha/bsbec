(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1970:function(e,t,n){"use strict";n.r(t);n(14);var r,a=n(490),o=n(710);function i(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var l=new Array(i),s=0;s<i;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c="Create Users";var l=i(a.a,{},void 0,i(o.a,{title:c}));function s(){return(s=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,l)}function c(e){i("next",e)}function l(e){i("throw",e)}c()})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{chunks:["users-create"],title:c,component:l});case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}t.default=function(){return s.apply(this,arguments)}},493:function(e,t,n){"use strict";var r=n(53),a=n.n(r);t.a={isInputEmpty:function(e){return a.a.isString(e)?!a.a.trim(e):a.a.isEmpty(e)},trimObject:function(e){return a.a.each(e,function(t,n){return e[n]=a.a.trim(t)})}}},518:function(e,t,n){"use strict";var r=n(131);t.a=function(e){return Object(r.b)(function(e){return{userManagement:e.userManagement}})(e)}},536:function(e,t,n){"use strict";var r,a=n(14),o=n.n(a),i=n(132),c=n.n(i),l=(n(10),n(53)),s=n(481),u=n(1),f=n(489);function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var l=new Array(i),s=0;s<i;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=Object(s.ub)({root:{marginBottom:10}})(s.qb),h=Object(s.ub)({root:{padding:15,marginBottom:20,width:"100%",boxShadow:"none"}})(s.T),v=Object(s.ub)({root:{display:"-webkit-box"}})(s.z),y=Object(s.ub)({root:{color:"".concat(u.e.NAVY_BLUE," !important"),display:"inline-block",padding:"0 12px"}})(s.e),g=Object(s.ub)({container:{padding:10}})(s.C),O=Object(s.ub)({item:{padding:"0  !important",margin:"0 0 20px"}})(s.C),w=m(b,{variant:"h5",component:"h3"},void 0,"Basic details"),j=m(b,{variant:"h5",component:"h3"},void 0,"Permissions"),S=function(e){var t=null,n=e.classes,r=e.formData,i=e.error,b=e.handleChange,S=e.handleSubmit,N=e.type,C=e.createUser,E=e.onCancel,k=e.loading,x=e.handleCheck,P=e.handleOpen,A=e.resetButtonLabel,T=e.handleSelect,D=e.rolesList,R=e.style,L=e.operationType,I={PaperProps:{style:{maxHeight:4.5*u.n+u.o,width:R}}},U=r.username,_=r.firstName,B=r.password,F=r.lastName,W=r.permissions,Y=r.roles,M=d(Object(a.useState)(0),2),V=M[0],q=M[1];Object(a.useEffect)(function(){return q(function(e){return c.a.findDOMNode(t).offsetWidth})},[]);var $=function(e){var t=[];return Object(l.each)(W,function(n){var r=n;Object(l.includes)(n.name,"READ")&&"READ"!==n.name?r.action="READ":Object(l.includes)(n.name,"CREATE")?r.action="CREATE":Object(l.includes)(n.name,"MODIFY")?r.action="MODIFY":Object(l.includes)(n.name,"REMOVE")?r.action="REMOVE":Object(l.includes)(n.name,"DELETE")?r.action="DELETE":r.action="WRITE",Object(l.includes)(n.name,e)&&(t=p(t).concat([r]))}),Object(l.sortBy)(t,["name"])};return m("form",{},void 0,m(h,{},void 0,w,m(s.nb,{id:"firstName",label:"First Name",className:n.textField,value:Object(l.capitalize)(_),onChange:b,margin:"normal",variant:"outlined",style:{borderColor:i.firstName?"red":""},fullWidth:!0,required:!0}),m(s.nb,{id:"lastName",label:"Last Name",className:n.textField,value:Object(l.capitalize)(F),onChange:b,margin:"normal",variant:"outlined",style:{borderColor:i.lastName?"red":""},fullWidth:!0,required:!0}),m(s.nb,{id:"username",label:"User Name",className:n.textField,value:U,onChange:b,margin:"normal",variant:"outlined",style:{borderColor:i.username?"red":""},fullWidth:!0,required:!0,disabled:!C}),C&&m(s.nb,{id:"password",label:"Password",className:n.textField,value:B,onChange:b,margin:"normal",variant:"outlined",style:{borderColor:i.password?"red":""},type:"password",fullWidth:!0,required:!0}),m(s.y,{required:!0,variant:"outlined",className:n.formControl},void 0,o.a.createElement(s.I,{ref:function(e){t=e},htmlFor:"outlined-age-native-simple"},"Roles"),m(s.ab,{multiple:!0,value:Y,onChange:T,input:m(s.S,{labelWidth:V,name:"Users",id:"outlined-age-native-simple"}),renderValue:function(e){return m("div",{className:n.chips},void 0,e.map(function(e){return m(s.h,{label:e,className:n.chip},e)}))},MenuProps:I},void 0,D.map(function(e){return m(s.R,{value:e},e,e)})))),m(h,{},void 0,j,m(g,{container:!0,spacing:24},void 0,m(O,{item:!0,xs:6,sm:3},void 0,m("p",{className:n.formLabel},void 0,"CONTAINER"),Object(l.map)($("CONTAINER"),function(e){return m(v,{control:m(y,{checked:e.checked,value:e.name,onChange:x(e.name)}),label:e.action},e.name)})),m(O,{item:!0,xs:6,sm:3},void 0,m("p",{className:n.formLabel},void 0,"REPOSITORY"),Object(l.map)($("REPOSITORY"),function(e){return m(v,{control:m(y,{checked:e.checked,value:e.name,onChange:x(e.name)}),label:e.action},e.name)})),m(O,{item:!0,xs:6,sm:3},void 0,m("p",{className:n.formLabel},void 0,"TYPE"),Object(l.map)($("TYPE"),function(e){return m(v,{control:m(y,{checked:e.checked,value:e.name,onChange:x(e.name)}),label:e.action},e.name)})),m(O,{item:!0,xs:6,sm:3},void 0,m("p",{className:n.formLabel},void 0,"USER"),Object(l.map)($("USER"),function(e){return m(v,{control:m(y,{checked:e.checked,value:e.name,onChange:x(e.name)}),label:e.action},e.name)})),m(O,{item:!0,xs:6,sm:3},void 0,m("p",{className:n.formLabel},void 0,"ARTIFACT"),Object(l.map)($("ARTIFACT"),function(e){return m(v,{control:m(y,{checked:e.checked,value:e.name,onChange:x(e.name)}),label:e.action},e.name)})))),m("div",{className:n.btnWrapper},void 0,m(s.d,{type:"submit",variant:"contained",color:"primary",className:n.submit,onClick:E},void 0,"Cancel"),m(s.d,{type:"submit",variant:"contained",color:"primary",className:n.submit,onClick:S},void 0,k?m(s.i,{size:22,className:n.progress}):N),Object(l.isEqual)(L,"changePassword")&&m(f.a,{style:{textDecoration:"none",color:u.e.DENIM,float:"left"},onClick:P,to:"#"},void 0,A)))};S.defaultProps={createUser:!1,handleOpen:function(){},resetButtonLabel:null,handleSelect:function(){},theme:{},rolesList:[],operationType:null},t.a=Object(s.ub)(function(e){return{submit:{backgroundColor:u.e.NAVY_BLUE,margin:"0 ".concat(e.spacing.unit,"px ").concat(e.spacing.unit,"px 0 "),textTransform:"capitalize",float:"right"},btnWrapper:{margin:"".concat(3*e.spacing.unit,"px auto")},progress:{margin:0,color:"white"},root:{display:"block"},colorSwitchBase:{color:u.e.NAVY_BLUE,"&$colorChecked":{color:u.e.NAVY_BLUE,"& + $colorBar":{backgroundColor:u.e.CURIOS_BLUE}}},colorBar:{color:u.e.NAVY_BLUE},colorChecked:{color:u.e.NAVY_BLUE},formLabel:{color:u.e.NAVY_BLUE,margin:0,fontWeight:"bold"},checkboxWrapper:{},formControl:{minWidth:120,width:"100%",marginTop:10},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4}}},{theme:!0})(S)},710:function(e,t,n){"use strict";var r,a=n(14),o=n.n(a),i=n(10),c=n.n(i),l=n(131),s=n(53),u=n(1),f=n(493),m=n(536),p=n(40),d=n(486),b=n(485),h=n(518);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return j(r,(n=r=j(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),Object.defineProperty(S(r),"state",{configurable:!0,enumerable:!0,writable:!0,value:{formData:{firstName:"",lastName:"",username:"",password:"",permissions:[],roles:["User"]},error:{firstName:"",lastName:"",username:"",password:""},loading:!1,checked:!1}}),Object.defineProperty(S(r),"isValid",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.state,t=e.formData,n=e.error,a=t.firstName,o=t.lastName,i=t.username,c=t.password;return Object(s.some)([i,c,a,o],f.a.isInputEmpty)&&Object(s.each)(u.x,function(e){n[e]=f.a.isInputEmpty(t[e])?u.r.mandatoryFields:""}),r.setState({error:n}),Object(s.every)(n,f.a.isInputEmpty)}}),Object.defineProperty(S(r),"handleSubmit",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,l)}function c(e){i("next",e)}function l(e){i("throw",e)}c()})}}(regeneratorRuntime.mark(function e(t){var n,a,o,i,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.context.fetch,a=r.state.formData,o=a.permissions,i=a.roles,i=Object(s.map)(i,function(e){return{role:e}}),a=g({},a,{permissions:Object(s.chain)(o).filter({checked:!0}).map(function(e){return Object(s.omit)(e,"checked")}).value(),roles:i}),t.preventDefault(),e.next=9,r.isValid();case 9:if(e.sent&&Object(s.get)(a,"roles.length")){e.next=14;break}return e.next=13,r.props.openNotifier({openNotify:!0,message:u.r.emptyField,variant:"warning"});case 13:return e.abrupt("return");case 14:return e.next=16,r.setState({loading:!0});case 16:return e.prev=16,e.next=19,n("".concat(u.b.signUp),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 19:return c=e.sent,e.next=22,c.json();case 22:if(l=e.sent,200!==c.status){e.next=28;break}return e.next=26,r.props.openNotifier({openNotify:!0,message:u.r.user.create.success,variant:"success"});case 26:e.next=30;break;case 28:return e.next=30,r.props.openNotifier({openNotify:!0,message:l.message,variant:"error"});case 30:return e.next=32,r.props.getUserList();case 32:return e.next=34,r.props.handleClose();case 34:return e.next=36,r.setState({loading:!1});case 36:p.a.push("/user-management"),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(16),console.error(e.t0);case 42:case"end":return e.stop()}},e,this,[[16,39]])}));return function(t){return e.apply(this,arguments)}}()}),Object.defineProperty(S(r),"handleChange",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=r.state,n=t.formData,a=t.error,o=e&&e.target,i=o.id,c=o.value;n[i]=c,a[i]=f.a.isInputEmpty(n[i])?u.r.mandatoryFields:"",r.setState({formData:n,error:a})}}),Object.defineProperty(S(r),"handleSwitch",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return function(t){r.setState(O({},e,t.target.checked))}}}),Object.defineProperty(S(r),"onCancel",{configurable:!0,enumerable:!0,writable:!0,value:function(){r.props.handleClose(),p.a.push("/user-management")}}),Object.defineProperty(S(r),"handleCheck",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return function(e){var t=r.state.formData,n=t.permissions;n=y(n=Object(s.filter)(n,function(t){return t.name!==e.target.value})).concat([{name:e.target.value,checked:e.target.checked}]),r.setState({formData:g({},t,{permissions:n})})}}}),Object.defineProperty(S(r),"handleSelect",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=r.state.formData,n=t.roles;n=e.target.value,e.target.value.length&&r.setState({formData:g({},t,{roles:n})})}}),n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.state.formData;this.setState({formData:g({},e,{permissions:Object(s.get)(this,"props.userManagement.permissions.length")?Object(s.get)(this,"props.userManagement.permissions"):u.g})})}},{key:"render",value:function(){var e=this.state,t=e.formData,n=e.error,a=e.loading,o=e.checked;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var l=new Array(i),s=0;s<i;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(m.a,{formData:t,error:n,handleChange:this.handleChange,handleSubmit:this.handleSubmit,type:"Create",onCancel:this.onCancel,createUser:!0,loading:a,checked:o,handleSwitch:this.handleSwitch,handleCheck:this.handleCheck,handleSelect:this.handleSelect,rolesList:u.v,style:{width:"60%"}})}}]),t}();Object.defineProperty(N,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{fetch:c.a.func.isRequired}}),Object.defineProperty(N,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{openNotifier:function(){}}}),t.a=Object(l.b)(null,{openNotifier:d.c})(Object(b.a)(Object(h.a)(N)))}}]);
//# sourceMappingURL=users-create.74e8daff.chunk.js.map